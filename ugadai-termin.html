<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–≥–∞–¥–∞–π —Ç–µ—Ä–º–∏–Ω! - –≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            border: 3px solid #FFD700;
        }

        /* –ó–ê–ì–û–õ–û–í–û–ö - –ñ–ï–õ–¢–´–ô –¶–í–ï–¢, –ò–ö–û–ù–ö–ê –ë–ï–ó –ó–ê–õ–ò–í–ö–ò */
        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #FFD700, #FFA500, #FF8C00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header h1 .emoji-icon {
            background: none !important;
            -webkit-text-fill-color: initial !important;
            filter: none !important;
            display: inline-block;
            font-size: 1.2em;
        }

        .header p {
            font-size: 1em;
            color: #ccc;
            max-width: 800px;
            margin: 0 auto 10px;
        }

        .game-area {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 20px;
            min-height: 400px;
        }

        /* –ë–ª–æ–∫ –∫–æ–º–∞–Ω–¥ - –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π */
        .teams-section {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            border-left: 5px solid #00ff88;
        }

        .teams-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .team-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .team-card.active {
            border-color: #FFD700;
            background: rgba(255, 215, 0, 0.1);
            transform: scale(1.02);
        }

        .team-icon {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .team-name {
            font-size: 1.1em;
            font-weight: bold;
            color: #00ff88;
        }

        .team-score {
            font-size: 0.9em;
            color: #ccc;
            margin-top: 5px;
        }

        /* –¢–ï–ö–£–©–ê–Ø –ö–û–ú–ê–ù–î–ê - –ö–û–ú–ü–ê–ö–¢–ù–´–ô –í–ê–†–ò–ê–ù–¢ */
        .current-team-display {
            background: rgba(255, 215, 0, 0.15);
            padding: 10px;
            border-radius: 12px;
            margin: 10px 0;
            border: 2px solid #FFD700;
            text-align: center;
        }

        .team-info-compact {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1.4em;
            font-weight: bold;
        }

        .team-info-compact .team-indicator {
            color: #FFD700;
            font-size: 0.9em;
        }

        .team-info-compact .team-icon {
            font-size: 1.3em;
            margin: 0;
        }

        .team-info-compact .team-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #FFD700;
            margin: 0;
        }

        .question-counter {
            margin-top: 5px;
            font-size: 1em;
            color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
            padding: 4px 10px;
            border-radius: 15px;
            display: inline-block;
        }

        /* –í–û–ü–†–û–° - –ë–û–õ–¨–®–û–ô –ò –í–´–î–ï–õ–ï–ù–ù–´–ô */
        .question-container {
            background: rgba(255, 215, 0, 0.1);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid #FFD700;
            text-align: center;
        }

        .question-text {
            font-size: 1.6em;
            font-weight: bold;
            color: #FFD700;
            line-height: 1.4;
            margin-bottom: 10px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
        }

        .category-badge {
            display: inline-block;
            background: rgba(0, 180, 219, 0.2);
            color: #00b4db;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-top: 5px;
            border: 1px solid rgba(0, 180, 219, 0.3);
        }

        /* –¢–ê–ô–ú–ï–† */
        .timer-container {
            text-align: center;
            margin: 20px 0;
        }

        .timer {
            font-size: 2.8em;
            font-weight: bold;
            color: #00ff88;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }

        .timer.warning {
            color: #ffaa00;
            animation: pulse 1s infinite;
        }

        .timer.danger {
            color: #ff4444;
            animation: pulse 0.5s infinite;
        }

        .timer-bar {
            width: 100%;
            height: 8px;
            background: #333;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }

        .timer-progress {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #00b4db);
            width: 100%;
            transition: width 1s linear;
        }

        /* –ü–û–î–°–ö–ê–ó–ö–ò */
        .hints-container {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 5px solid #00b4db;
        }

        .hint {
            font-size: 1.2em;
            margin: 10px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            display: none;
            animation: fadeIn 0.5s ease;
            border-left: 4px solid transparent;
        }

        .hint.active {
            display: block;
            border-left-color: #00b4db;
        }

        .hint-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #00b4db;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 10px;
            font-weight: bold;
            font-size: 1em;
        }

        /* –í–í–û–î –û–¢–í–ï–¢–ê */
        .answer-section {
            text-align: center;
            margin: 20px 0;
        }

        .answer-input {
            padding: 15px 20px;
            font-size: 1.2em;
            width: 80%;
            max-width: 450px;
            border: 3px solid #00b4db;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-align: center;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .answer-input:focus {
            outline: none;
            border-color: #00ff88;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
        }

        .answer-input.correct {
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
        }

        .answer-input.incorrect {
            border-color: #ff4444;
            background: rgba(255, 68, 68, 0.1);
        }

        /* –ö–ù–û–ü–ö–ò */
        .buttons {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
            margin: 15px 0;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 15px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 160px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #00b4db, #0083b0);
            color: white;
        }

        .btn-success {
            background: linear-gradient(45deg, #00ff88, #00cc66);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(45deg, #ffaa00, #ff8800);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(45deg, #ff4444, #ff6b6b);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0, 180, 219, 0.4);
        }

        /* –†–ï–ó–£–õ–¨–¢–ê–¢ */
        .result-message {
            text-align: center;
            padding: 15px;
            margin: 15px 0;
            border-radius: 15px;
            display: none;
            animation: slideIn 0.5s ease;
        }

        .result-correct {
            background: rgba(0, 255, 136, 0.15);
            border: 2px solid #00ff88;
            color: #00ff88;
        }

        .result-wrong {
            background: rgba(255, 68, 68, 0.15);
            border: 2px solid #ff4444;
            color: #ff4444;
        }

        .joke-container {
            background: rgba(255, 215, 0, 0.1);
            padding: 15px;
            border-radius: 15px;
            margin: 15px 0;
            border-left: 4px solid #FFD700;
            font-style: italic;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        /* –°–ß–ï–¢ */
        .score-display {
            text-align: center;
            font-size: 1.1em;
            margin: 15px 0;
            color: #ffdd59;
            background: rgba(255, 221, 89, 0.1);
            padding: 12px;
            border-radius: 15px;
        }

        .points-info {
            font-size: 0.85em;
            color: #aaa;
            margin-top: 5px;
        }

        /* –£–ü–†–ê–í–õ–Ø–Æ–©–ò–ï –ö–ù–û–ü–ö–ò */
        .control-buttons {
            text-align: center;
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        /* –ê–ù–ò–ú–ê–¶–ò–ò */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }

        /* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
        @media (max-width: 768px) {
            .answer-input {
                width: 95%;
                font-size: 1em;
            }
            
            .btn {
                min-width: 140px;
                padding: 10px 15px;
            }
            
            .timer {
                font-size: 2.2em;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .teams-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .question-text {
                font-size: 1.4em;
            }
            
            .team-info-compact {
                font-size: 1.2em;
                flex-direction: column;
                gap: 5px;
            }
            
            .buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 250px;
            }
        }

        @media (max-width: 480px) {
            .teams-grid {
                grid-template-columns: 1fr;
            }
            
            .hint {
                font-size: 1em;
                padding: 12px;
            }
            
            .hint-number {
                width: 25px;
                height: 25px;
                line-height: 25px;
                font-size: 0.9em;
            }
            
            .question-text {
                font-size: 1.2em;
                padding: 15px 10px;
            }
            
            .question-counter {
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span class="emoji-icon">‚ö°</span> –£–ì–ê–î–ê–ô –¢–ï–†–ú–ò–ù!</h1>
            <p>–¢—Ä–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏ ‚Üí –æ–¥–∏–Ω —Ç–µ—Ä–º–∏–Ω ‚Üí 3/2/1 –±–∞–ª–ª! –ö–æ–º–∞–Ω–¥—ã –æ—Ç–≤–µ—á–∞—é—Ç —Å–µ—Ä–∏—è–º–∏ –ø–æ 4 –≤–æ–ø—Ä–æ—Å–∞.</p>
            <button class="btn btn-primary" onclick="window.location.href='index.html'" style="padding: 8px 20px; font-size: 0.9em;">
                ‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é
            </button>
        </div>

        <!-- –ò–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å -->
        <div class="game-area" id="gameArea">
            <!-- –¢–µ–∫—É—â–∞—è –∫–æ–º–∞–Ω–¥–∞ (–∫–æ–º–ø–∞–∫—Ç–Ω–æ) -->
            <div class="current-team-display" id="currentTeamDisplay" style="display: none;">
                <div class="team-info-compact">
                    <span class="team-indicator">–û–¢–í–ï–ß–ê–ï–¢:</span>
                    <span class="team-icon" id="currentTeamIcon">‚öõÔ∏è</span>
                    <span class="team-name" id="currentTeamName">–†–µ–∞–∫—Ç–æ—Ä</span>
                </div>
                <div class="question-counter" id="questionCounter">1/4</div>
            </div>

            <!-- –í–æ–ø—Ä–æ—Å -->
            <div class="question-container" id="questionContainer" style="display: none;">
                <div class="question-text" id="questionText">
                    –í–æ–ø—Ä–æ—Å –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã...
                </div>
                <div class="category-badge" id="categoryBadge">
                    –ö–∞—Ç–µ–≥–æ—Ä–∏—è: ???
                </div>
            </div>

            <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∏ -->
            <div class="hints-container" id="hintsContainer" style="display: none;">
                <div class="hint active" id="hint1">
                    <span class="hint-number">1</span>
                    <span id="hintText1">–ü–µ—Ä–≤–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...</span>
                </div>
                <div class="hint" id="hint2">
                    <span class="hint-number">2</span>
                    <span id="hintText2">–í—Ç–æ—Ä–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞...</span>
                </div>
                <div class="hint" id="hint3">
                    <span class="hint-number">3</span>
                    <span id="hintText3">–¢—Ä–µ—Ç—å—è –ø–æ–¥—Å–∫–∞–∑–∫–∞...</span>
                </div>
            </div>

            <!-- –¢–∞–π–º–µ—Ä -->
            <div class="timer-container" id="timerContainer" style="display: none;">
                <div class="timer" id="timer">30</div>
                <div class="timer-bar">
                    <div class="timer-progress" id="timerBar"></div>
                </div>
                <div style="color: #ccc; margin-top: 8px; font-size: 0.9em;">
                    ‚è±Ô∏è –û—Å—Ç–∞–ª–æ—Å—å —Å–µ–∫—É–Ω–¥
                </div>
            </div>

            <!-- –í–≤–æ–¥ –æ—Ç–≤–µ—Ç–∞ -->
            <div class="answer-section" id="answerSection" style="display: none;">
                <input type="text" id="answerInput" class="answer-input" 
                       placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω..." 
                       onkeypress="if(event.key === 'Enter') checkAnswer()"
                       autocomplete="off" disabled>
                
                <div class="buttons" id="gameButtons">
                    <button class="btn btn-warning" onclick="showNextHint()" id="nextHintBtn" disabled>
                        üîç –°–ª–µ–¥—É—é—â–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞
                    </button>
                    <button class="btn btn-success" onclick="checkAnswer()" id="checkBtn" disabled>
                        ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç
                    </button>
                    <button class="btn btn-danger" onclick="skipQuestion()" id="skipBtn" disabled>
                        ‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤–æ–ø—Ä–æ—Å
                    </button>
                </div>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
            <div class="result-message" id="resultMessage"></div>
            
            <!-- –®—É—Ç–∫–∞ -->
            <div class="joke-container" id="jokeContainer"></div>

            <!-- –°—á–µ—Ç -->
            <div class="score-display" id="scoreDisplay" style="display: none;">
                –ë–∞–ª–ª–æ–≤: <span id="currentScore">0</span> | 
                –¢–µ—Ä–º–∏–Ω–æ–≤: <span id="termsSolved">0</span>/20
                <div class="points-info">
                    (3 –±–∞–ª–ª–∞ - 1 –ø–æ–¥—Å–∫–∞–∑–∫–∞, 2 –±–∞–ª–ª–∞ - 2 –ø–æ–¥—Å–∫–∞–∑–∫–∏, 1 –±–∞–ª–ª - 3 –ø–æ–¥—Å–∫–∞–∑–∫–∏)
                </div>
            </div>

            <!-- –ö–æ–º–∞–Ω–¥—ã -->
            <div class="teams-section" id="teamsSection">
                <h3 style="color: #00ff88; margin-bottom: 10px; text-align: center;">üë• –ö–æ–º–∞–Ω–¥—ã</h3>
                <div class="teams-grid" id="teamsGrid">
                    <!-- –ö–æ–º–∞–Ω–¥—ã –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –∏–∑ JS -->
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <div class="control-buttons">
                <button class="btn btn-primary" id="startSeriesBtn" onclick="startSeries()">
                    üöÄ –ù–∞—á–∞—Ç—å —Å–µ—Ä–∏—é –≤–æ–ø—Ä–æ—Å–æ–≤
                </button>
                <button class="btn btn-primary" id="nextQuestionBtn" onclick="nextTerm()" style="display: none;">
                    ‚û°Ô∏è –°–ª–µ–¥—É—é—â–∏–π —Ç–µ—Ä–º–∏–Ω
                </button>
                <button class="btn btn-warning" id="nextTeamBtn" onclick="nextTeamTurn()" style="display: none;">
                    üë• –ü–µ—Ä–µ–¥–∞—Ç—å —Ö–æ–¥ —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥–µ
                </button>
            </div>
        </div>
    </div>

    <script>
        // ========== –ö–û–ù–°–¢–ê–ù–¢–´ –ò –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==========
        const energyTerms = [
            // === –°–ï–†–ò–Ø 1: –ö–æ–º–∞–Ω–¥–∞ 1 (–≤–æ–ø—Ä–æ—Å—ã 1-4) ===
            {
                term: "–û–¢–í–Å–†–¢–ö–ê",
                variants: ["–û–¢–í–ï–†–¢–ö–ê", "–û–¢–í–Å–†–¢–ö–ê"],
                category: "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã",
                hints: [
                    "–ë—ã–≤–∞–µ—Ç –∫—Ä–µ—Å—Ç–æ–≤–∞—è –∏ –ø–ª–æ—Å–∫–∞—è",
                    "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–∫—Ä—É—á–∏–≤–∞–Ω–∏—è –≤–∏–Ω—Ç–æ–≤",
                    "–£ —ç–ª–µ–∫—Ç—Ä–∏–∫–æ–≤ –µ—Å—Ç—å –¥–∏—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è –≤–µ—Ä—Å–∏—è"
                ],
                joke: "–ó–Ω–∞–µ—Ç–µ, –ø–æ—á–µ–º—É –æ—Ç–≤–µ—Ä—Ç–∫–∞ –Ω–µ —Ö–æ–¥–∏—Ç –≤ —à–∫–æ–ª—É? –ü–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –∏ —Ç–∞–∫ –≤—Å—ë –∑–Ω–∞–µ—Ç –ø—Ä–æ –≤–∏–Ω—Ç–∏–∫–∏! ü™õ"
            },
            {
                term: "–¢–≠–¶",
                category: "–≠–Ω–µ—Ä–≥–æ–æ–±—ä–µ–∫—Ç—ã",
                hints: [
                    "–¢–µ–ø–ª–æ—ç–ª–µ–∫—Ç—Ä–æ—Ü–µ–Ω—Ç—Ä–∞–ª—å (3 –±—É–∫–≤—ã!)",
                    "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ –∏ —Ç–µ–ø–ª–æ",
                    "–û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–æ—Ä—è—á–µ–π –≤–æ–¥–æ–π –∂–∏–ª—ã–µ —Ä–∞–π–æ–Ω—ã"
                ],
                joke: "–¢–≠–¶ - –º–∞—Å—Ç–µ—Ä –Ω–∞ –≤—Å–µ —Ä—É–∫–∏: –∏ —Å–≤–µ—Ç –¥–∞—ë—Ç, –∏ –≥—Ä–µ–µ—Ç! üî•"
            },
            {
                term: "–†–ï–ó–ò–°–¢–û–†",
                category: "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",
                hints: [
                    "–ü–∞—Å—Å–∏–≤–Ω—ã–π —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç",
                    "–ò–º–µ–µ—Ç —Ü–≤–µ—Ç–Ω—ã–µ –ø–æ–ª–æ—Å–∫–∏ –¥–ª—è –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏",
                    "–°–æ–∑–¥–∞—ë—Ç —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –≤ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–π —Ü–µ–ø–∏"
                ],
                joke: "–†–µ–∑–∏—Å—Ç–æ—Ä –≤—Å–µ–≥–¥–∞ –≥–æ–≤–æ—Ä–∏—Ç —Ç–æ–∫—É: '–ù–µ —Ç–∞–∫ –±—ã—Å—Ç—Ä–æ, –¥—Ä—É–∂–æ–∫!' üõë"
            },
            {
                term: "–î–ò–û–î",
                category: "–ü–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–∏",
                hints: [
                    "–ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ç–æ–∫ —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω—É —Å—Ç–æ—Ä–æ–Ω—É",
                    "–°–≤–µ—Ç–æ–¥–∏–æ–¥ (LED) - –æ–¥–∏–Ω –∏–∑ –≤–∏–¥–æ–≤",
                    "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã–ø—Ä—è–º–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ç–æ–∫–∞"
                ],
                joke: "–î–∏–æ–¥ - –∫–∞–∫ —Å—Ç–æ—Ä–æ–∂: —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω—É —Å—Ç–æ—Ä–æ–Ω—É –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç! ‚Üí"
            },

            // === –°–ï–†–ò–Ø 2: –ö–æ–º–∞–Ω–¥–∞ 2 (–≤–æ–ø—Ä–æ—Å—ã 5-8) ===
            {
                term: "–¢–ï–°–¢–ï–†",
                variants: ["–¢–ï–°–¢–ï–†", "–ú–£–õ–¨–¢–ò–ú–ï–¢–†"],
                category: "–ò–∑–º–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–±–æ—Ä—ã",
                hints: [
                    "–ò–∑–º–µ—Ä—è–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, —Ç–æ–∫ –∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ",
                    "–ë—ã–≤–∞–µ—Ç —Ü–∏—Ñ—Ä–æ–≤–æ–π –∏ —Å—Ç—Ä–µ–ª–æ—á–Ω—ã–π",
                    "–ú–æ–∂–µ—Ç –∏–∑–º–µ—Ä—è—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–µ –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, —Ç–æ–∫ –∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ"
                ],
                joke: "–¢–µ—Å—Ç–µ—Ä –≤—Å–µ–≥–¥–∞ –∑–Ω–∞–µ—Ç, –∫—É–¥–∞ —Ç–µ—á—ë—Ç —Ç–æ–∫. –ê –≤–æ—Ç –∫—É–¥–∞ —Ç–µ—á—ë—Ç –≤—Ä–µ–º—è - –Ω–µ –∑–Ω–∞–µ—Ç –¥–∞–∂–µ –æ–Ω! ‚è∞"
            },
            {
                term: "–ê–≠–°",
                category: "–≠–Ω–µ—Ä–≥–æ–æ–±—ä–µ–∫—Ç—ã",
                hints: [
                    "–ê—Ç–æ–º–Ω–∞—è —ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏—è (3 –±—É–∫–≤—ã!)",
                    "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —è–¥–µ—Ä–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —ç–Ω–µ—Ä–≥–∏–∏",
                    "–¢–æ–ø–ª–∏–≤–æ - —É—Ä–∞–Ω"
                ],
                joke: "–ê–≠–° - —Å–∞–º–∞—è –º–æ—â–Ω–∞—è '–±–∞—Ç–∞—Ä–µ–π–∫–∞' –Ω–∞ –ø–ª–∞–Ω–µ—Ç–µ! ‚öõÔ∏è"
            },
            {
                term: "–ü–†–ï–î–û–•–†–ê–ù–ò–¢–ï–õ–¨",
                category: "–ó–∞—â–∏—Ç–∞",
                hints: [
                    "–ó–∞—â–∏—â–∞–µ—Ç –æ—Ç –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –∑–∞–º—ã–∫–∞–Ω–∏—è",
                    "–ü–µ—Ä–µ–≥–æ—Ä–∞–µ—Ç –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ —Ç–æ–∫–∞",
                    "–ë—ã–≤–∞–µ—Ç –ø–ª–∞–≤–∫–∏–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π"
                ],
                joke: "–ü—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å –∂–µ—Ä—Ç–≤—É–µ—Ç —Å–æ–±–æ–π, —á—Ç–æ–±—ã —Å–ø–∞—Å—Ç–∏ –¥—Ä—É–≥–∏—Ö! –ù–∞—Å—Ç–æ—è—â–∏–π –≥–µ—Ä–æ–π! ü¶∏"
            },
            {
                term: "–ü–ê–Ø–õ–¨–ù–ò–ö",
                category: "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã",
                hints: [
                    "–ù–∞–≥—Ä–µ–≤–∞–µ—Ç—Å—è –¥–ª—è –ø–∞–π–∫–∏",
                    "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∏–ø–æ–π –∏ —Ñ–ª—é—Å",
                    "–ë—ã–≤–∞–µ—Ç —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π –∏ –≥–∞–∑–æ–≤—ã–π"
                ],
                joke: "–ü–∞—è–ª—å–Ω–∏–∫ –≤—Å–µ–≥–¥–∞ –≥–æ—Ä—è—á - –∫–∞–∫ —ç–ª–µ–∫—Ç—Ä–∏–∫ –≤ —Ä–∞–±–æ—Ç–µ! üî•"
            },

            // === –°–ï–†–ò–Ø 3: –ö–æ–º–∞–Ω–¥–∞ 3 (–≤–æ–ø—Ä–æ—Å—ã 9-12) ===
            {
                term: "–ì–≠–°",
                category: "–≠–Ω–µ—Ä–≥–æ–æ–±—ä–µ–∫—Ç—ã",
                hints: [
                    "–ì–∏–¥—Ä–æ—ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏—è (3 –±—É–∫–≤—ã!)",
                    "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —ç–Ω–µ—Ä–≥–∏—é –ø–∞–¥–∞—é—â–µ–π –≤–æ–¥—ã",
                    "–ò–º–µ–µ—Ç –ø–ª–æ—Ç–∏–Ω—É –∏ –≤–æ–¥–æ—Ö—Ä–∞–Ω–∏–ª–∏—â–µ"
                ],
                joke: "–ì–≠–° —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–µ—Ä–µ—Ä—ã–≤–æ–≤ - –≤–æ–¥–∞ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É—Ö–æ–¥–∏—Ç –≤ –æ—Ç–ø—É—Å–∫! üí¶"
            },
            {
                term: "–ê–í–¢–û–ú–ê–¢",
                category: "–ó–∞—â–∏—Ç–∞",
                hints: [
                    "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å",
                    "–û—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ",
                    "–ï—Å—Ç—å —Ç–µ–ø–ª–æ–≤–æ–π –∏ —ç–ª–µ–∫—Ç—Ä–æ–º–∞–≥–Ω–∏—Ç–Ω—ã–π —Ä–∞—Å—Ü–µ–ø–∏—Ç–µ–ª—å"
                ],
                joke: "–ê–≤—Ç–æ–º–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∞–º - —ç–ª–µ–∫—Ç—Ä–∏–∫—É –º–æ–∂–Ω–æ –∏ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å! üò¥"
            },
            {
                term: "–ö–û–ù–¢–ê–ö–¢",
                category: "–°–æ–µ–¥–∏–Ω–µ–Ω–∏—è",
                hints: [
                    "–ú–µ—Å—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤",
                    "–ë—ã–≤–∞–µ—Ç —Ä–∞–∑—ä—ë–º–Ω—ã–π –∏ –Ω–µ—Ä–∞–∑—ä—ë–º–Ω—ã–π",
                    "–î–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å—Ç—ã–º –∏ –ø–ª–æ—Ç–Ω—ã–º"
                ],
                joke: "–•–æ—Ä–æ—à–∏–π –∫–æ–Ω—Ç–∞–∫—Ç - –∫–∞–∫ —Ö–æ—Ä–æ—à–∏–π –¥—Ä—É–≥: –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏! üìû"
            },
            {
                term: "–°–û–ï–î–ò–ù–ï–ù–ò–ï",
                category: "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Ü–µ–ø–∏",
                hints: [
                    "–ë—ã–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ",
                    "–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫ —Ç–µ—á—ë—Ç —Ç–æ–∫ –≤ —Ü–µ–ø–∏",
                    "–í –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º - –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ"
                ],
                joke: "–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ - –∫–∞–∫ –¥—Ä—É–∑—å—è: –≤—Å–µ –ø–æ–¥ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º! üîå"
            },

            // === –°–ï–†–ò–Ø 4: –ö–æ–º–∞–Ω–¥–∞ 4 (–≤–æ–ø—Ä–æ—Å—ã 13-16) ===
            {
                term: "–£–†–ê–ù",
                category: "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã",
                hints: [
                    "–†–∞–¥–∏–æ–∞–∫—Ç–∏–≤–Ω—ã–π —Ö–∏–º–∏—á–µ—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç",
                    "–û—Å–Ω–æ–≤–Ω–æ–µ —Ç–æ–ø–ª–∏–≤–æ –¥–ª—è –∞—Ç–æ–º–Ω—ã—Ö —ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏–π",
                    "–ò–º–µ–µ—Ç –∏–∑–æ—Ç–æ–ø—ã U-235 –∏ U-238"
                ],
                joke: "–£—Ä–∞–Ω - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ '—Ç–æ–ø–ª–∏–≤–æ', –∫–æ—Ç–æ—Ä–æ–µ —Å–≤–µ—Ç–∏—Ç—Å—è –≤ —Ç–µ–º–Ω–æ—Ç–µ! ‚ú®"
            },
            {
                term: "–°–¢–ê–ë–ò–õ–ò–ó–ê–¢–û–†",
                category: "–ó–∞—â–∏—Ç–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è",
                hints: [
                    "–°—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≤ —Å–µ—Ç–∏",
                    "–ó–∞—â–∏—â–∞–µ—Ç –æ—Ç —Å–∫–∞—á–∫–æ–≤ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è",
                    "–ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –¥–µ—Ä–µ–≤–Ω—è—Ö –∏ —á–∞—Å—Ç–Ω—ã—Ö –¥–æ–º–∞—Ö"
                ],
                joke: "–°—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä - –∫–∞–∫ –π–æ–≥: –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ! üßò"
            },
            {
                term: "–†–ï–õ–ï",
                category: "–ö–æ–º–º—É—Ç–∞—Ü–∏—è",
                hints: [
                    "–≠–ª–µ–∫—Ç—Ä–æ–º–∞–≥–Ω–∏—Ç–Ω—ã–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å",
                    "–£–ø—Ä–∞–≤–ª—è–µ—Ç –±–æ–ª—å—à–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π –º–∞–ª—ã–º —Ç–æ–∫–æ–º",
                    "–©—ë–ª–∫–∞–µ—Ç –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏"
                ],
                joke: "–†–µ–ª–µ –≤—Å–µ–≥–¥–∞ —á—ë—Ç–∫–æ —â—ë–ª–∫–∞–µ—Ç - –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –º—è–º–ª–∏—Ç! üîä"
            },
            {
                term: "–ö–õ–ï–ú–ú–ê",
                category: "–°–æ–µ–¥–∏–Ω–∏—Ç–µ–ª–∏",
                hints: [
                    "–ó–∞–∂–∏–º –¥–ª—è –ø—Ä–æ–≤–æ–¥–æ–≤",
                    "–ë—ã–≤–∞–µ—Ç –≤–∏–Ω—Ç–æ–≤–∞—è –∏ –ø—Ä—É–∂–∏–Ω–Ω–∞—è",
                    "–û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥—ë–∂–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç"
                ],
                joke: "–ö–ª–µ–º–º–∞ –¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–≤–æ–¥–∞ —Ç–∞–∫ –∫—Ä–µ–ø–∫–æ, —á—Ç–æ –¥–∞–∂–µ —Ç–æ–∫ –Ω–µ –≤—ã—Ä–≤–µ—Ç—Å—è! üí™"
            },

            // === –§–ò–ù–ê–õ: –í—Å–µ –∫–æ–º–∞–Ω–¥—ã (–≤–æ–ø—Ä–æ—Å—ã 17-20) ===
            {
                term: "–¢–†–ê–ù–°–§–û–†–ú–ê–¢–û–†",
                category: "–≠–ª–µ–∫—Ç—Ä–æ–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ",
                hints: [
                    "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è",
                    "–ò–º–µ–µ—Ç –ø–µ—Ä–≤–∏—á–Ω—É—é –∏ –≤—Ç–æ—Ä–∏—á–Ω—É—é –æ–±–º–æ—Ç–∫–∏",
                    "–ë—ã–≤–∞–µ—Ç –ø–æ–≤—ã—à–∞—é—â–∏–π –∏ –ø–æ–Ω–∏–∂–∞—é—â–∏–π"
                ],
                joke: "–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä - –º–∞—Å—Ç–µ—Ä –ø–µ—Ä–µ–≤–æ–ø–ª–æ—â–µ–Ω–∏–π –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è! üîÑ"
            },
            {
                term: "–ü–†–û–í–û–î–ù–ò–ö",
                category: "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã",
                hints: [
                    "–ú–∞—Ç–µ—Ä–∏–∞–ª, —Ö–æ—Ä–æ—à–æ –ø—Ä–æ–≤–æ–¥—è—â–∏–π —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —Ç–æ–∫",
                    "–ú–µ–¥—å –∏ –∞–ª—é–º–∏–Ω–∏–π - —Å–∞–º—ã–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ",
                    "–ò–º–µ–µ—Ç –º–∞–ª–æ–µ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ"
                ],
                joke: "–ü—Ä–æ–≤–æ–¥–Ω–∏–∫ - –≥–æ—Å—Ç–µ–ø—Ä–∏–∏–º–Ω—ã–π —Ö–æ–∑—è–∏–Ω –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–æ–≤! üè†"
            },
            {
                term: "–û–°–¶–ò–õ–õ–û–ì–†–ê–§",
                category: "–ò–∑–º–µ—Ä–µ–Ω–∏—è",
                hints: [
                    "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞",
                    "–ò–º–µ–µ—Ç —ç–∫—Ä–∞–Ω —Å —Å–µ—Ç–∫–æ–π",
                    "–ù—É–∂–µ–Ω –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
                ],
                joke: "–û—Å—Ü–∏–ª–ª–æ–≥—Ä–∞—Ñ –≤–∏–¥–∏—Ç —Ç–æ–∫ –Ω–∞—Å–∫–≤–æ–∑—å! üëÅÔ∏è"
            },
            {
                term: "–¢–ê–•–û–ú–ï–¢–†",
                category: "–ò–∑–º–µ—Ä–µ–Ω–∏—è",
                hints: [
                    "–ò–∑–º–µ—Ä—è–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è",
                    "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±–æ—Ä–æ—Ç—ã –≤ –º–∏–Ω—É—Ç—É",
                    "–ï—Å—Ç—å –≤ –∞–≤—Ç–æ–º–æ–±–∏–ª—è—Ö –∏ –Ω–∞ —Å—Ç–∞–Ω–∫–∞—Ö"
                ],
                joke: "–¢–∞—Ö–æ–º–µ—Ç—Ä –≤—Å–µ–≥–¥–∞ –≤ –∫—É—Ä—Å–µ, –∫—Ç–æ –∫—Ä—É—á–µ –≤—Å–µ—Ö –∫—Ä—É—Ç–∏—Ç—Å—è! üåÄ"
            }
        ];

        // ========== –ò–ì–†–û–í–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==========
        let currentTermIndex = 0;
        let currentHintIndex = 0;
        let score = 0;
        let termsSolved = 0;
        let timer;
        let timeLeft = 30;
        let currentTeamIndex = 0;
        let teams = [];
        let isFinalRound = false;
        let isSeriesActive = false;
        let currentTeamQuestion = 0;

        // ========== –§–£–ù–ö–¶–ò–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ö–û–ú–ê–ù–î–ê–ú–ò ==========
        function loadTeams() {
            const savedTeams = localStorage.getItem('energyTeams');
            teams = savedTeams ? JSON.parse(savedTeams) : [];
            
            if (teams.length === 0) {
                teams = [
                    { name: "–†–µ–∞–∫—Ç–æ—Ä", icon: "‚öõÔ∏è", color: "#FF6B6B", score: 0 },
                    { name: "–í–æ–ª—å—Ç", icon: "‚ö°", color: "#4ECDC4", score: 0 },
                    { name: "–ê–º–ø–µ—Ä", icon: "üîå", color: "#45B7D1", score: 0 },
                    { name: "–ö–≤–∞–Ω—Ç", icon: "üî¨", color: "#96CEB4", score: 0 }
                ];
                localStorage.setItem('energyTeams', JSON.stringify(teams));
            }
            
            renderTeams();
            updateCurrentTeamDisplay();
        }

        function renderTeams() {
            const teamsGrid = document.getElementById('teamsGrid');
            teamsGrid.innerHTML = '';
            
            teams.forEach((team, index) => {
                const teamCard = document.createElement('div');
                teamCard.className = `team-card ${index === currentTeamIndex ? 'active' : ''}`;
                teamCard.style.borderColor = team.color;
                teamCard.innerHTML = `
                    <div class="team-icon">${team.icon}</div>
                    <div class="team-name">${team.name}</div>
                    <div class="team-score">${team.score || 0} –±–∞–ª–ª–æ–≤</div>
                `;
                teamsGrid.appendChild(teamCard);
            });
        }

        function updateCurrentTeamDisplay() {
            const currentTeam = teams[currentTeamIndex];
            if (!currentTeam) return;
            
            document.getElementById('currentTeamIcon').textContent = currentTeam.icon;
            document.getElementById('currentTeamName').textContent = currentTeam.name;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –≤–æ–ø—Ä–æ—Å–æ–≤
            const questionNumber = currentTeamQuestion + 1;
            document.getElementById('questionCounter').textContent = `${questionNumber}/4`;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ —Ç–µ–∫—É—â–µ–π –∫–æ–º–∞–Ω–¥—ã
            document.getElementById('currentTeamDisplay').style.display = 'block';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–æ–º–∞–Ω–¥—É –≤ —Å–µ—Ç–∫–µ
            document.querySelectorAll('.team-card').forEach((card, index) => {
                card.classList.toggle('active', index === currentTeamIndex);
            });
        }

        // ========== –û–°–ù–û–í–ù–´–ï –ò–ì–†–û–í–´–ï –§–£–ù–ö–¶–ò–ò ==========
        function startSeries() {
            isSeriesActive = true;
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞—á–∞—Ç—å —Å–µ—Ä–∏—é"
            document.getElementById('startSeriesBtn').style.display = 'none';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–≥—Ä–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            document.getElementById('currentTeamDisplay').style.display = 'block';
            document.getElementById('questionContainer').style.display = 'block';
            document.getElementById('hintsContainer').style.display = 'block';
            document.getElementById('timerContainer').style.display = 'block';
            document.getElementById('answerSection').style.display = 'block';
            document.getElementById('scoreDisplay').style.display = 'block';
            document.getElementById('gameButtons').style.display = 'flex';
            
            // –ù–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å
            startTerm();
        }

        function startTerm() {
            if (currentTermIndex >= energyTerms.length) {
                endGame();
                return;
            }
            
            const term = energyTerms[currentTermIndex];
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–∞–Ω–¥–µ
            updateCurrentTeamDisplay();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–æ–ø—Ä–æ—Å (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É –∫–∞–∫ –≤–æ–ø—Ä–æ—Å)
            document.getElementById('questionText').textContent = term.hints[0];
            document.getElementById('categoryBadge').textContent = `–ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${term.category}`;
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏
            currentHintIndex = 0;
            document.getElementById('hint1').classList.add('active');
            document.getElementById('hint2').classList.remove('active');
            document.getElementById('hint3').classList.remove('active');
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏
            document.getElementById('hintText1').textContent = term.hints[0];
            document.getElementById('hintText2').textContent = term.hints[1];
            document.getElementById('hintText3').textContent = term.hints[2];
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
            const answerInput = document.getElementById('answerInput');
            answerInput.value = '';
            answerInput.className = 'answer-input';
            answerInput.disabled = false;
            answerInput.focus();
            
            // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            document.getElementById('resultMessage').style.display = 'none';
            document.getElementById('jokeContainer').style.display = 'none';
            document.getElementById('nextQuestionBtn').style.display = 'none';
            document.getElementById('nextTeamBtn').style.display = 'none';
            
            // –í–∫–ª—é—á–∞–µ–º –∏–≥—Ä–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏
            document.getElementById('nextHintBtn').disabled = false;
            document.getElementById('checkBtn').disabled = false;
            document.getElementById('skipBtn').disabled = false;
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
            resetTimer();
            startTimer();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç
            updateScoreDisplay();
        }

        function showNextHint() {
            if (currentHintIndex < 2) {
                currentHintIndex++;
                document.getElementById(`hint${currentHintIndex + 1}`).classList.add('active');
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞–ª–ª–∞—Ö
                updatePointsInfo();
            }
            
            if (currentHintIndex >= 2) {
                document.getElementById('nextHintBtn').disabled = true;
            }
        }

        function updatePointsInfo() {
            const points = currentHintIndex === 0 ? 3 : currentHintIndex === 1 ? 2 : 1;
            document.getElementById('scoreDisplay').innerHTML = `
                –ë–∞–ª–ª–æ–≤: <span id="currentScore">${score}</span> | 
                –¢–µ—Ä–º–∏–Ω–æ–≤: <span id="termsSolved">${termsSolved}</span>/20
                <div class="points-info">
                    (–ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å: ${points} –±–∞–ª–ª${points > 1 ? '–∞' : ''})
                </div>
            `;
        }

        function checkAnswer() {
            clearInterval(timer);
            
            const userAnswer = document.getElementById('answerInput').value.trim().toUpperCase();
            const currentTerm = energyTerms[currentTermIndex];
            const correctAnswer = currentTerm.term.toUpperCase();
            const variants = currentTerm.variants || [correctAnswer];
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω–∏—è
            const isCorrect = variants.some(variant => {
                const normalizedVariant = variant.toUpperCase().replace('–Å', '–ï');
                const normalizedUserAnswer = userAnswer.replace('–Å', '–ï');
                return normalizedUserAnswer === normalizedVariant;
            });
            
            // –†–∞—Å—á–µ—Ç –±–∞–ª–ª–æ–≤
            let points = 0;
            if (isCorrect) {
                if (currentHintIndex === 0) points = 3;
                else if (currentHintIndex === 1) points = 2;
                else if (currentHintIndex === 2) points = 1;
                
                score += points;
                termsSolved++;
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—á–∫–∏ —Ç–µ–∫—É—â–µ–π –∫–æ–º–∞–Ω–¥–µ
                if (teams[currentTeamIndex]) {
                    teams[currentTeamIndex].score = (teams[currentTeamIndex].score || 0) + points;
                    localStorage.setItem('energyTeams', JSON.stringify(teams));
                    renderTeams();
                }
                
                document.getElementById('answerInput').className = 'answer-input correct';
            } else {
                document.getElementById('answerInput').className = 'answer-input incorrect';
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            showResult(isCorrect, points, currentTerm);
            
            // –û—Ç–∫–ª—é—á–∞–µ–º –∏–≥—Ä–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏
            document.getElementById('nextHintBtn').disabled = true;
            document.getElementById('checkBtn').disabled = true;
            document.getElementById('skipBtn').disabled = true;
            document.getElementById('answerInput').disabled = true;
        }

        function skipQuestion() {
            clearInterval(timer);
            showResult(false, 0, energyTerms[currentTermIndex]);
            
            document.getElementById('nextHintBtn').disabled = true;
            document.getElementById('checkBtn').disabled = true;
            document.getElementById('skipBtn').disabled = true;
            document.getElementById('answerInput').disabled = true;
        }

        function showResult(isCorrect, points, termData) {
            const resultDiv = document.getElementById('resultMessage');
            const jokeDiv = document.getElementById('jokeContainer');
            
            const correctAnswers = termData.variants || [termData.term];
            const answerText = correctAnswers.length > 1 
                ? correctAnswers.join(' –∏–ª–∏ ') 
                : termData.term;
            
            if (isCorrect) {
                resultDiv.className = 'result-message result-correct';
                resultDiv.innerHTML = `
                    ‚úÖ <strong>–í–ï–†–ù–û!</strong> +${points} –±–∞–ª–ª${points > 1 ? '–∞' : ''}!<br>
                    –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: <strong>${answerText}</strong>
                    ${points === 3 ? 'üéØ –£–≥–∞–¥–∞–ª–∏ —Å –ø–µ—Ä–≤–æ–π –ø–æ–¥—Å–∫–∞–∑–∫–∏!' : 
                      points === 2 ? 'üëç –°–æ –≤—Ç–æ—Ä–æ–π –ø–æ–¥—Å–∫–∞–∑–∫–∏!' : 
                      'ü§î –° —Ç—Ä–µ—Ç—å–µ–π –ø–æ–¥—Å–∫–∞–∑–∫–∏!'}
                `;
            } else {
                resultDiv.className = 'result-message result-wrong';
                resultDiv.innerHTML = `
                    ‚ùå <strong>–ù–ï –£–ì–ê–î–ê–õ–ò!</strong><br>
                    –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: <strong>${answerText}</strong>
                `;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —à—É—Ç–∫—É
            jokeDiv.innerHTML = `üé≠ ${termData.joke}`;
            jokeDiv.style.display = 'block';
            resultDiv.style.display = 'block';
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –∫–∞–∫–æ–π –∫–Ω–æ–ø–∫–æ–π –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å
            const isLastQuestionInSeries = currentTeamQuestion >= 3;
            const isLastQuestionOverall = currentTermIndex >= energyTerms.length - 1;
            
            if (isLastQuestionOverall) {
                document.getElementById('nextQuestionBtn').textContent = 'üèÜ –ó–ê–í–ï–†–®–ò–¢–¨ –ò–ì–†–£';
                document.getElementById('nextQuestionBtn').style.display = 'block';
            } else if (isLastQuestionInSeries && !isFinalRound) {
                document.getElementById('nextTeamBtn').style.display = 'block';
            } else {
                document.getElementById('nextQuestionBtn').textContent = '‚û°Ô∏è –°–ª–µ–¥—É—é—â–∏–π —Ç–µ—Ä–º–∏–Ω';
                document.getElementById('nextQuestionBtn').style.display = 'block';
            }
        }

        function nextTerm() {
            currentTermIndex++;
            currentTeamQuestion++;
            
            if (currentTeamQuestion >= 4) {
                currentTeamQuestion = 0;
                isSeriesActive = false;
            }
            
            if (currentTermIndex < energyTerms.length) {
                if (isSeriesActive) {
                    startTerm();
                } else {
                    document.getElementById('gameButtons').style.display = 'none';
                    document.getElementById('startSeriesBtn').style.display = 'block';
                    document.getElementById('nextQuestionBtn').style.display = 'none';
                    document.getElementById('nextTeamBtn').style.display = 'none';
                }
            } else {
                endGame();
            }
        }

        function nextTeamTurn() {
            if (isFinalRound) {
                isSeriesActive = true;
                startTerm();
                return;
            }
            
            currentTeamIndex = (currentTeamIndex + 1) % teams.length;
            currentTeamQuestion = 0;
            isSeriesActive = false;
            
            if (currentTeamIndex === 0) {
                isFinalRound = true;
            }
            
            document.getElementById('gameButtons').style.display = 'none';
            document.getElementById('startSeriesBtn').style.display = 'block';
            document.getElementById('nextQuestionBtn').style.display = 'none';
            document.getElementById('nextTeamBtn').style.display = 'none';
            
            updateCurrentTeamDisplay();
        }

        // ========== –¢–ê–ô–ú–ï–† ==========
        function startTimer() {
            resetTimer();
            timer = setInterval(updateTimer, 1000);
        }

        function resetTimer() {
            clearInterval(timer);
            timeLeft = 30;
            updateTimerDisplay();
        }

        function updateTimer() {
            timeLeft--;
            updateTimerDisplay();
            
            if (timeLeft <= 0) {
                clearInterval(timer);
                timeUp();
            }
        }

        function updateTimerDisplay() {
            document.getElementById('timer').textContent = timeLeft;
            document.getElementById('timerBar').style.width = `${(timeLeft / 30) * 100}%`;
            
            const timerElement = document.getElementById('timer');
            if (timeLeft <= 10) {
                timerElement.className = 'timer danger';
            } else if (timeLeft <= 20) {
                timerElement.className = 'timer warning';
            } else {
                timerElement.className = 'timer';
            }
        }

        function timeUp() {
            showResult(false, 0, energyTerms[currentTermIndex]);
            document.getElementById('answerInput').disabled = true;
            document.getElementById('nextHintBtn').disabled = true;
            document.getElementById('checkBtn').disabled = true;
            document.getElementById('skipBtn').disabled = true;
        }

        // ========== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ==========
        function updateScoreDisplay() {
            document.getElementById('currentScore').textContent = score;
            document.getElementById('termsSolved').textContent = termsSolved;
            updatePointsInfo();
        }

        function endGame() {
            const finalScreen = document.createElement('div');
            finalScreen.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.95);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
            `;
            
            const sortedTeams = [...teams].sort((a, b) => (b.score || 0) - (a.score || 0));
            const accuracy = Math.round((termsSolved / energyTerms.length) * 100);
            
            finalScreen.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
                    padding: 30px;
                    border-radius: 20px;
                    border: 3px solid #FFD700;
                    text-align: center;
                    max-width: 600px;
                    width: 90%;
                    max-height: 90vh;
                    overflow-y: auto;
                ">
                    <h2 style="color: #FFD700; margin-bottom: 20px; font-size: 1.8em;">üèÜ –ò–ì–†–ê –ó–ê–í–ï–†–®–ï–ù–ê!</h2>
                    
                    <div style="font-size: 1.2em; margin-bottom: 20px; color: #FFD700;">
                        ${getFinalComment(accuracy)}
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <div style="font-size: 1.2em; color: #00b4db; margin-bottom: 10px;">üìä –û–ë–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:</div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; text-align: left; font-size: 0.95em;">
                            <div>‚úÖ –£–≥–∞–¥–∞–Ω–æ —Ç–µ—Ä–º–∏–Ω–æ–≤:</div>
                            <div style="color: #00ff88; text-align: right;">${termsSolved}/${energyTerms.length}</div>
                            <div>üéØ –¢–æ—á–Ω–æ—Å—Ç—å:</div>
                            <div style="color: #00ff88; text-align: right;">${accuracy}%</div>
                            <div>‚ö° –û–±—â–∏–π —Å—á—ë—Ç:</div>
                            <div style="color: #00ff88; text-align: right;">${score} –±–∞–ª–ª–æ–≤</div>
                            <div>üèÖ –°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª:</div>
                            <div style="color: #00ff88; text-align: right;">${(score/termsSolved || 0).toFixed(1)} –∑–∞ —Ç–µ—Ä–º–∏–Ω</div>
                        </div>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <div style="font-size: 1.2em; color: #00b4db; margin-bottom: 10px;">ü•á –¢–ê–ë–õ–ò–¶–ê –õ–ò–î–ï–†–û–í:</div>
                        ${sortedTeams.map((team, index) => `
                            <div style="
                                display: flex;
                                justify-content: space-between;
                                align-items: center;
                                margin: 8px 0;
                                padding: 10px 15px;
                                background: ${index === 0 ? 'rgba(255, 215, 0, 0.2)' : 'rgba(255, 255, 255, 0.05)'};
                                border-radius: 10px;
                                border-left: 4px solid ${team.color};
                            ">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span style="font-size: 1.1em;">${index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : 'üèÖ'}</span>
                                    <span style="font-size: 1.1em;">${team.icon}</span>
                                    <span style="font-weight: bold;">${team.name}</span>
                                </div>
                                <div style="font-size: 1.2em; color: #00ff88; font-weight: bold;">
                                    ${team.score || 0} –±–∞–ª–ª–æ–≤
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; margin-top: 20px;">
                        <button onclick="this.parentElement.parentElement.remove(); location.reload()" 
                                style="
                                    padding: 12px 25px;
                                    background: linear-gradient(45deg, #FFD700, #FFA500);
                                    color: white;
                                    border: none;
                                    border-radius: 25px;
                                    font-size: 1em;
                                    font-weight: bold;
                                    cursor: pointer;
                                ">
                            üîÑ –ò–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑
                        </button>
                        <button onclick="window.location.href='index.html'" 
                                style="
                                    padding: 12px 25px;
                                    background: linear-gradient(45deg, #00ff88, #00cc66);
                                    color: white;
                                    border: none;
                                    border-radius: 25px;
                                    font-size: 1em;
                                    font-weight: bold;
                                    cursor: pointer;
                                ">
                            üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(finalScreen);
        }

        function getFinalComment(accuracy) {
            if (accuracy >= 90) return "üéâ –ü–æ—Ç—Ä—è—Å–∞—é—â–µ! –í—ã - —Ö–æ–¥—è—á–∞—è —ç–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏!";
            if (accuracy >= 70) return "üëè –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ó–Ω–∞–Ω–∏—è –Ω–∞ –≤—ã—Å–æ—Ç–µ!";
            if (accuracy >= 50) return "üëç –•–æ—Ä–æ—à–æ! –ï—Å—Ç—å —á—Ç–æ –≤—Å–ø–æ–º–Ω–∏—Ç—å, –µ—Å—Ç—å —á—Ç–æ –∏–∑—É—á–∏—Ç—å!";
            return "üìö –ü–æ–ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ—Å—å –µ—â—ë - –∏ –±—É–¥–µ—Ç–µ –∑–Ω–∞—Ç—å –≤—Å–µ —Ç–µ—Ä–º–∏–Ω—ã!";
        }

        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
        document.addEventListener('DOMContentLoaded', function() {
            loadTeams();
            updateScoreDisplay();
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∏–≥—Ä–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            document.getElementById('gameButtons').style.display = 'none';
            document.getElementById('currentTeamDisplay').style.display = 'none';
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('hintsContainer').style.display = 'none';
            document.getElementById('timerContainer').style.display = 'none';
            document.getElementById('answerSection').style.display = 'none';
            document.getElementById('scoreDisplay').style.display = 'none';
            
            // –§–æ–∫—É—Å –Ω–∞ –∫–Ω–æ–ø–∫–µ "–ù–∞—á–∞—Ç—å —Å–µ—Ä–∏—é"
            document.getElementById('startSeriesBtn').focus();
        });
    </script>
</body>
</html>