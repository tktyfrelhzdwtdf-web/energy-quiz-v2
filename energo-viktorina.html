<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–≠–Ω–µ—Ä–≥–æ-—Ä–µ–±—É—Å—ã</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* –®–∞–ø–∫–∞ */
        .header {
            text-align: center;
            padding: 20px 0 30px 0;
            margin-bottom: 25px;
        }

        .header h1 {
            font-size: 3.5em;
            margin-bottom: 15px;
            color: #FFD700; /* –Ø—Ä–∫–∏–π –∑–æ–ª–æ—Ç–æ–π –∫–∞–∫ "–ì–û–¢–û–í–´ –ö –†–ï–ë–£–°–£?" */
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .header-subtitle {
            font-size: 1.5em;
            color: #E0E0E0;
            margin-bottom: 25px;
        }

        /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .control-panel {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 180px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #4FC3F7, #29B6F6);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #333;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –º–∞–∫–µ—Ç - 2 –∫–æ–ª–æ–Ω–∫–∏ */
        .game-layout {
            display: flex;
            gap: 30px;
            min-height: 700px;
        }

        /* –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –ö–æ–º–∞–Ω–¥—ã –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */
        .left-column {
            flex: 0 0 30%;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –†–µ–±—É—Å –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
        .right-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* –ë–ª–æ–∫ –∫–æ–º–∞–Ω–¥ */
        .teams-section {
            background: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }

        .teams-section h2 {
            color: #FFD700;
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
        }

        .teams-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .team-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .team-card.active {
            border-color: #FFD700;
            background: rgba(255, 215, 0, 0.1);
            transform: scale(1.02);
        }

        .team-name {
            font-size: 1.5em;
            font-weight: bold;
            color: #4FC3F7;
            margin-bottom: 5px;
        }

        .team-score {
            font-size: 1.8em;
            color: #FFD700;
            font-weight: bold;
        }

        /* –ë–ª–æ–∫ —Ç–µ–∫—É—â–µ–π –∫–æ–º–∞–Ω–¥—ã */
        .current-team {
            background: rgba(255, 215, 0, 0.15);
            padding: 20px;
            border-radius: 15px;
            border: 3px solid #FFD700;
            text-align: center;
        }

        .current-team h3 {
            color: #FFD700;
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .current-team-display {
            font-size: 2.5em;
            color: #4FC3F7;
            font-weight: bold;
            margin: 10px 0;
        }

        .rebus-counter {
            font-size: 1.3em;
            color: #E0E0E0;
            margin-top: 10px;
        }

        /* –ë–ª–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .game-controls {
            background: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid rgba(79, 195, 247, 0.3);
        }

        .control-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .btn-control {
            width: 100%;
            padding: 18px;
            font-size: 1.3em;
        }

        /* –ë–ª–æ–∫ –≤–æ–ø—Ä–æ—Å–∞ */
        .question-section {
            background: rgba(255, 255, 255, 0.08);
            padding: 40px;
            border-radius: 15px;
            border: 2px solid rgba(129, 199, 132, 0.3);
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .question-text {
            font-size: 4em; /* –û—á–µ–Ω—å –∫—Ä—É–ø–Ω—ã–π —à—Ä–∏—Ñ—Ç */
            font-weight: bold;
            color: #FFD700;
            text-align: center;
            margin: 20px 0;
            text-shadow: 0 4px 8px rgba(0,0,0,0.5);
            line-height: 1.2;
        }

        /* –ë–ª–æ–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫ */
        .hints-section {
            background: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid rgba(255, 152, 0, 0.3);
        }

        .hints-section h3 {
            color: #FF9800;
            font-size: 1.8em;
            margin-bottom: 20px;
            text-align: center;
        }

        .hint-text {
            font-size: 1.5em;
            color: #E0E0E0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin: 10px 0;
            display: none;
        }

        .hint-text.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        /* –ë–ª–æ–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
        .image-section {
            background: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
        }

        .rebus-image {
            max-width: 100%;
            max-height: 350px;
            border-radius: 10px;
            border: 4px solid #81C784;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        /* –ë–ª–æ–∫ –æ—Ç–≤–µ—Ç–∞ */
        .answer-section {
            background: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid rgba(79, 195, 247, 0.3);
            margin-top: 20px;
        }

        .answer-section h3 {
            color: #4FC3F7;
            font-size: 1.8em;
            margin-bottom: 20px;
            text-align: center;
        }

        .answer-input {
            width: 100%;
            padding: 20px;
            font-size: 2em;
            border: 3px solid #4FC3F7;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-align: center;
            margin-bottom: 20px;
        }

        .answer-input:focus {
            outline: none;
            border-color: #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        /* –¢–∞–π–º–µ—Ä */
        .timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 68, 68, 0.2);
            padding: 15px 25px;
            border-radius: 25px;
            border: 2px solid #FF5252;
            font-size: 1.8em;
            font-weight: bold;
            color: #FFD700;
            font-family: 'Courier New', monospace;
            display: none;
            z-index: 100;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 1200px) {
            .game-layout {
                flex-direction: column;
            }
            
            .question-text {
                font-size: 3em;
            }
        }
    </style>
</head>
<body>
    <!-- –¢–∞–π–º–µ—Ä -->
    <div class="timer" id="timer">‚è±Ô∏è 40 —Å–µ–∫</div>

    <div class="container">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header">
            <h1>üß© –≠–ù–ï–†–ì–û-–†–ï–ë–£–°–´</h1>
            <div class="header-subtitle">
                –†–∞–∑–≥–∞–¥—ã–≤–∞–π—Ç–µ —Ä–µ–±—É—Å—ã –Ω–∞ –≤—Ä–µ–º—è! 40 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ—Ç–≤–µ—Ç. 1/2/3 –±–∞–ª–ª–∞ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
            </div>
            
            <div class="control-panel">
                <button class="btn btn-primary" onclick="window.location.href='index.html'">
                    ‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é
                </button>
                <button class="btn btn-warning" id="startBtn" onclick="startGame()">
                    üöÄ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                </button>
                <button class="btn btn-primary" id="resetBtn" onclick="resetGame()" style="display: none;">
                    üîÑ –°–±—Ä–æ—Å–∏—Ç—å –∏–≥—Ä—É
                </button>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –º–∞–∫–µ—Ç -->
        <div class="game-layout">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
            <div class="left-column">
                <!-- –ö–æ–º–∞–Ω–¥—ã -->
                <div class="teams-section">
                    <h2>–ö–û–ú–ê–ù–î–´</h2>
                    <div class="teams-grid" id="teamsGrid">
                        <!-- –ö–æ–º–∞–Ω–¥—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>

                <!-- –¢–µ–∫—É—â–∞—è –∫–æ–º–∞–Ω–¥–∞ -->
                <div class="current-team" id="currentTeamSection" style="display: none;">
                    <h3>–û—Ç–≤–µ—á–∞–µ—Ç:</h3>
                    <div class="current-team-display" id="currentTeamName">–ö–æ–º–∞–Ω–¥–∞ ?</div>
                    <div class="rebus-counter">
                        –†–µ–±—É—Å <span id="currentRebusNum">1</span> –∏–∑ <span id="totalRebuses">?</span>
                    </div>
                </div>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
                <div class="game-controls" id="gameControls" style="display: none;">
                    <div class="control-buttons">
                        <button class="btn btn-warning btn-control" onclick="showNextHint()" id="hintBtn" disabled>
                            –°–ª–µ–¥—É—é—â–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞
                        </button>
                        <button class="btn btn-primary btn-control" onclick="checkAnswer()" id="checkBtn" disabled>
                            –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç
                        </button>
                        <button class="btn btn-primary btn-control" onclick="skipRebus()" id="skipBtn" disabled>
                            –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ä–µ–±—É—Å
                        </button>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
            <div class="right-column">
                <!-- –í–æ–ø—Ä–æ—Å -->
                <div class="question-section">
                    <div class="question-text" id="questionText">
                        –ì–û–¢–û–í–´ –ö –†–ï–ë–£–°–£?
                    </div>
                </div>

                <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∏ -->
                <div class="hints-section" id="hintsSection" style="display: none;">
                    <h3>–ü–æ–¥—Å–∫–∞–∑–∫–∏:</h3>
                    <div class="hint-text active" id="hint1">???????</div>
                    <div class="hint-text" id="hint2">???????</div>
                    <div class="hint-text" id="hint3">???????</div>
                </div>

                <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
                <div class="image-section">
                    <img id="rebusImage" class="rebus-image" src="" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–±—É—Å–∞" style="display: none;">
                    <div id="imagePlaceholder" style="font-size: 1.5em; color: #aaa;">
                        üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–±—É—Å–∞
                    </div>
                </div>

                <!-- –û—Ç–≤–µ—Ç -->
                <div class="answer-section" id="answerSection" style="display: none;">
                    <h3>–û—Ç–≤–µ—Ç:</h3>
                    <input type="text" id="answerInput" class="answer-input" 
                           placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç..." 
                           onkeypress="if(event.key === 'Enter') checkAnswer()"
                           autocomplete="off" disabled>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== –î–ê–ù–ù–´–ï –†–ï–ë–£–°–û–í ==========
        const rebuses = [
            {
                id: 1,
                image: "Media/rebuses/rebus-01-zaryad.png",
                answer: "–ó–ê–†–Ø–î",
                variants: ["–ó–ê–†–Ø–î"],
                hints: [
                    "–ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º –∏–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º",
                    "–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è - –ö—É–ª–æ–Ω",
                    "–ù–∞–∫–æ–ø–ª–µ–Ω –≤ –±–∞—Ç–∞—Ä–µ–π–∫–∞—Ö –∏ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞—Ö"
                ]
            },
            {
                id: 2,
                image: "Media/rebuses/rebus-02-generator.png",
                answer: "–ì–ï–ù–ï–†–ê–¢–û–†",
                variants: ["–ì–ï–ù–ï–†–ê–¢–û–†"],
                hints: [
                    "–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫—É—é —ç–Ω–µ—Ä–≥–∏—é –≤ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫—É—é",
                    "–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É —ç–ª–µ–∫—Ç—Ä–æ–º–∞–≥–Ω–∏—Ç–Ω–æ–π –∏–Ω–¥—É–∫—Ü–∏–∏",
                    "–°–æ–∑–¥–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–æ–∫"
                ]
            },
            {
                id: 3,
                image: "Media/rebuses/rebus-03-turbina.png",
                answer: "–¢–£–†–ë–ò–ù–ê",
                variants: ["–¢–£–†–ë–ò–ù–ê"],
                hints: [
                    "–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —ç–Ω–µ—Ä–≥–∏—é –ø–∞—Ä–∞ –∏–ª–∏ –≤–æ–¥—ã –≤ –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫—É—é",
                    "–í—Ä–∞—â–∞–µ—Ç—Å—è —Å –≤—ã—Å–æ–∫–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é",
                    "–°–µ—Ä–¥—Ü–µ —Ç–µ–ø–ª–æ–≤—ã—Ö –∏ –≥–∏–¥—Ä–æ—ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏–π"
                ]
            },
            {
                id: 4,
                image: "Media/rebuses/rebus-04-batareyka.png",
                answer: "–ë–ê–¢–ê–†–ï–ô–ö–ê",
                variants: ["–ë–ê–¢–ê–†–ï–ô–ö–ê", "–ê–ö–ö–£–ú–£–õ–Ø–¢–û–†"],
                hints: [
                    "–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ç–æ–∫–∞",
                    "–ë—ã–≤–∞–µ—Ç –ø–∞–ª—å—á–∏–∫–æ–≤–∞—è, –º–∏–∑–∏–Ω—á–∏–∫–æ–≤–∞—è, –∫—Ä–æ–Ω–∞",
                    "–ò–º–µ–µ—Ç –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π –∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ–ª—é—Å"
                ]
            }
        ];

        // ========== –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò–ì–†–´ ==========
        let teams = [];
        let currentTeamIndex = 0;
        let currentRebusIndex = 0;
        let teamRebusIndex = 0;
        let totalTeams = 2; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 2 –∫–æ–º–∞–Ω–¥—ã
        let usedRebuses = new Set();
        let timerInterval = null;
        let timeLeft = 40;
        let currentHintIndex = 0;

        // ========== –§–£–ù–ö–¶–ò–ò ==========
        function initializeTeams() {
            const teamCount = prompt("–°–∫–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥ –±—É–¥–µ—Ç –∏–≥—Ä–∞—Ç—å? (2-4)", "2");
            totalTeams = Math.min(4, Math.max(2, parseInt(teamCount) || 2));
            
            teams = [];
            const teamNames = ["–≠–Ω–µ—Ä–≥–∏—è", "–í–æ–ª—å—Ç", "–ê—Ç–æ–º", "–ö–≤–∞–Ω—Ç"];
            
            for (let i = 0; i < totalTeams; i++) {
                teams.push({
                    name: teamNames[i],
                    score: 0
                });
            }
            
            renderTeams();
        }

        function renderTeams() {
            const teamsGrid = document.getElementById('teamsGrid');
            teamsGrid.innerHTML = '';
            
            teams.forEach((team, index) => {
                const teamCard = document.createElement('div');
                teamCard.className = `team-card ${index === currentTeamIndex ? 'active' : ''}`;
                teamCard.innerHTML = `
                    <div class="team-name">${team.name}</div>
                    <div class="team-score">${team.score} –±–∞–ª–ª–æ–≤</div>
                `;
                teamsGrid.appendChild(teamCard);
            });
        }

        function startGame() {
            initializeTeams();
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Å—Ç–∞—Ä—Ç–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–±—Ä–æ—Å
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('resetBtn').style.display = 'inline-block';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–≥—Ä–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            document.getElementById('currentTeamSection').style.display = 'block';
            document.getElementById('gameControls').style.display = 'block';
            document.getElementById('hintsSection').style.display = 'block';
            document.getElementById('answerSection').style.display = 'block';
            document.getElementById('rebusImage').style.display = 'block';
            document.getElementById('imagePlaceholder').style.display = 'none';
            document.getElementById('timer').style.display = 'block';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–±—É—Å–æ–≤
            document.getElementById('totalRebuses').textContent = rebuses.length;
            
            // –ù–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–≤—ã–π —Ä–µ–±—É—Å
            showNextRebus();
        }

        function showNextRebus() {
            clearInterval(timerInterval);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å –ª–∏ —Ä–µ–±—É—Å—ã
            if (usedRebuses.size >= rebuses.length) {
                finishGame();
                return;
            }
            
            // –í—ã–±–∏—Ä–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ä–µ–±—É—Å
            let rebus;
            do {
                currentRebusIndex = Math.floor(Math.random() * rebuses.length);
                rebus = rebuses[currentRebusIndex];
            } while (usedRebuses.has(rebus.id) && usedRebuses.size < rebuses.length);
            
            usedRebuses.add(rebus.id);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            renderTeams();
            
            document.getElementById('currentTeamName').textContent = teams[currentTeamIndex].name;
            document.getElementById('currentRebusNum').textContent = usedRebuses.size;
            document.getElementById('rebusImage').src = rebus.image;
            document.getElementById('questionText').textContent = `–†–ï–ë–£–° –î–õ–Ø –ö–û–ú–ê–ù–î–´ "${teams[currentTeamIndex].name}"`;
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏
            currentHintIndex = 0;
            document.getElementById('hint1').classList.add('active');
            document.getElementById('hint2').classList.remove('active');
            document.getElementById('hint3').classList.remove('active');
            
            document.getElementById('hint1').textContent = rebus.hints[0];
            document.getElementById('hint2').textContent = rebus.hints[1];
            document.getElementById('hint3').textContent = rebus.hints[2];
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
            const answerInput = document.getElementById('answerInput');
            answerInput.value = '';
            answerInput.disabled = false;
            answerInput.focus();
            
            // –í–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏
            document.getElementById('hintBtn').disabled = false;
            document.getElementById('checkBtn').disabled = false;
            document.getElementById('skipBtn').disabled = false;
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
            startTimer();
        }

        function startTimer() {
            timeLeft = 40;
            document.getElementById('timer').textContent = `‚è±Ô∏è ${timeLeft} —Å–µ–∫`;
            
            timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = `‚è±Ô∏è ${timeLeft} —Å–µ–∫`;
                
                if (timeLeft <= 10) {
                    document.getElementById('timer').style.animation = 'pulse 0.5s infinite';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timeUp();
                }
            }, 1000);
        }

        function timeUp() {
            const answerInput = document.getElementById('answerInput');
            answerInput.disabled = true;
            answerInput.placeholder = "–í—Ä–µ–º—è –≤—ã—à–ª–æ!";
            
            document.getElementById('hintBtn').disabled = true;
            document.getElementById('checkBtn').disabled = true;
            document.getElementById('skipBtn').disabled = true;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
            const rebus = rebuses[currentRebusIndex];
            document.getElementById('questionText').textContent = `‚è∞ –í–†–ï–ú–Ø –í–´–®–õ–û! –û—Ç–≤–µ—Ç: ${rebus.answer}`;
            
            // –ñ–¥—ë–º 3 —Å–µ–∫—É–Ω–¥—ã –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –¥–∞–ª—å—à–µ
            setTimeout(() => {
                currentTeamIndex = (currentTeamIndex + 1) % totalTeams;
                showNextRebus();
            }, 3000);
        }

        function showNextHint() {
            if (currentHintIndex < 2) {
                currentHintIndex++;
                document.getElementById(`hint${currentHintIndex + 1}`).classList.add('active');
            }
            
            if (currentHintIndex >= 2) {
                document.getElementById('hintBtn').disabled = true;
            }
        }

        function checkAnswer() {
            clearInterval(timerInterval);
            
            const userAnswer = document.getElementById('answerInput').value.trim().toUpperCase();
            const rebus = rebuses[currentRebusIndex];
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–≤–µ—Ç
            const isCorrect = rebus.variants.some(variant => 
                userAnswer.replace('–Å', '–ï') === variant.toUpperCase().replace('–Å', '–ï')
            );
            
            // –ù–∞—á–∏—Å–ª—è–µ–º –±–∞–ª–ª—ã (1-3 –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫)
            const points = 3 - currentHintIndex;
            
            if (isCorrect) {
                teams[currentTeamIndex].score += points;
                document.getElementById('questionText').textContent = `‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û! +${points} –±–∞–ª–ª–æ–≤`;
            } else {
                document.getElementById('questionText').textContent = `‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û! –û—Ç–≤–µ—Ç: ${rebus.answer}`;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            renderTeams();
            
            // –û—Ç–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏
            document.getElementById('hintBtn').disabled = true;
            document.getElementById('checkBtn').disabled = true;
            document.getElementById('skipBtn').disabled = true;
            document.getElementById('answerInput').disabled = true;
            
            // –ñ–¥—ë–º 3 —Å–µ–∫—É–Ω–¥—ã –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –¥–∞–ª—å—à–µ
            setTimeout(() => {
                currentTeamIndex = (currentTeamIndex + 1) % totalTeams;
                showNextRebus();
            }, 3000);
        }

        function skipRebus() {
            clearInterval(timerInterval);
            
            const rebus = rebuses[currentRebusIndex];
            document.getElementById('questionText').textContent = `‚è≠Ô∏è –ü–†–û–ü–£–©–ï–ù–û! –û—Ç–≤–µ—Ç: ${rebus.answer}`;
            
            // –û—Ç–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏
            document.getElementById('hintBtn').disabled = true;
            document.getElementById('checkBtn').disabled = true;
            document.getElementById('skipBtn').disabled = true;
            document.getElementById('answerInput').disabled = true;
            
            // –ñ–¥—ë–º 3 —Å–µ–∫—É–Ω–¥—ã –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –¥–∞–ª—å—à–µ
            setTimeout(() => {
                currentTeamIndex = (currentTeamIndex + 1) % totalTeams;
                showNextRebus();
            }, 3000);
        }

        function finishGame() {
            clearInterval(timerInterval);
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–º–∞–Ω–¥—ã –ø–æ –æ—á–∫–∞–º
            const sortedTeams = [...teams].sort((a, b) => b.score - a.score);
            
            let resultsHTML = `<div style="text-align: center; padding: 30px;">
                <h2 style="color: #FFD700; font-size: 2.5em; margin-bottom: 30px;">üèÜ –ò–ì–†–ê –ó–ê–í–ï–†–®–ï–ù–ê!</h2>
                <h3 style="color: #4FC3F7; font-size: 2em; margin-bottom: 20px;">–ü–û–ë–ï–î–ò–¢–ï–õ–¨:</h3>
                <div style="font-size: 3em; color: #FFD700; margin: 20px 0;">${sortedTeams[0].name}</div>
                <div style="font-size: 2em; color: #81C784;">${sortedTeams[0].score} –±–∞–ª–ª–æ–≤</div>`;
            
            if (sortedTeams.length > 1) {
                resultsHTML += `<div style="margin-top: 40px;">
                    <h4 style="color: #E0E0E0; font-size: 1.5em; margin-bottom: 20px;">–í—Å–µ –∫–æ–º–∞–Ω–¥—ã:</h4>`;
                
                sortedTeams.forEach((team, index) => {
                    resultsHTML += `<div style="
                        background: rgba(255,255,255,0.05);
                        padding: 15px;
                        margin: 10px 0;
                        border-radius: 10px;
                        font-size: 1.3em;
                        display: flex;
                        justify-content: space-between;
                    ">
                        <span>${team.name}</span>
                        <span style="color: #FFD700;">${team.score} –±–∞–ª–ª–æ–≤</span>
                    </div>`;
                });
                
                resultsHTML += `</div>`;
            }
            
            resultsHTML += `<button class="btn btn-warning" onclick="resetGame()" style="margin-top: 40px; padding: 20px 40px; font-size: 1.5em;">
                üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞
            </button></div>`;
            
            document.querySelector('.question-section').innerHTML = resultsHTML;
            document.getElementById('hintsSection').style.display = 'none';
            document.getElementById('answerSection').style.display = 'none';
            document.getElementById('gameControls').style.display = 'none';
        }

        function resetGame() {
            // –°–±—Ä–æ—Å –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
            teams = [];
            currentTeamIndex = 0;
            currentRebusIndex = 0;
            teamRebusIndex = 0;
            usedRebuses.clear();
            clearInterval(timerInterval);
            
            // –°–±—Ä–æ—Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('resetBtn').style.display = 'none';
            document.getElementById('currentTeamSection').style.display = 'none';
            document.getElementById('gameControls').style.display = 'none';
            document.getElementById('hintsSection').style.display = 'none';
            document.getElementById('answerSection').style.display = 'none';
            document.getElementById('rebusImage').style.display = 'none';
            document.getElementById('imagePlaceholder').style.display = 'block';
            document.getElementById('timer').style.display = 'none';
            
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –≤–∏–¥
            document.querySelector('.question-section').innerHTML = `
                <div class="question-text" id="questionText">–ì–û–¢–û–í–´ –ö –†–ï–ë–£–°–£?</div>
            `;
            
            document.getElementById('teamsGrid').innerHTML = '';
            document.getElementById('currentTeamName').textContent = '–ö–æ–º–∞–Ω–¥–∞ ?';
            document.getElementById('currentRebusNum').textContent = '1';
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏
            document.getElementById('hint1').classList.add('active');
            document.getElementById('hint2').classList.remove('active');
            document.getElementById('hint3').classList.remove('active');
        }
    </script>
</body>
</html>
